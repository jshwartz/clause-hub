<h1 class="ui header">
  <div class="content">
    Account Settings
  </div>
</h1>
<div class="ui hidden divider"></div>

<div class="ui relaxed stackable grid">
  <div class="ui eight wide column">
    <div class="ui raised block segment">
      <h3 class="ui header">Personal Information</h3>
      <div class="ui clearing divider"></div>
      {{#if isEditing}}
        <div class={{if errorMessage "ui error form" "ui form"}}>
          <div class="ui error message">
            <p>{{errors.firstName}}</p>
            <p>{{errors.lastName}}</p>
            <p>{{errors.server}}</p>
          </div>
          <div class={{if errors.firstName "field error required" "field required"}}>
            <label>First Name</label>
            {{one-way-input value=firstName update=(action (mut firstName))}}
          </div>
          <div class={{if errors.lastName "field error required" "field required"}}>
            <label>Last Name</label>
            {{one-way-input value=lastName update=(action (mut lastName))}}
          </div>
          <div class="field">
            <label>Company / Firm</label>
            {{one-way-input value=company update=(action (mut company))}}
          </div>
          <button class="ui mini teal button"{{action 'saveProfile'}}>Save</button>
          <button class="ui mini button" {{action 'closeEdit'}}>Cancel</button>
        </div>
      {{else}}
        <strong>Name</strong>
        <p>{{model.fullName}}</p>
        <strong>Company / Firm</strong>
        <p>{{model.company}}</p>
        <p class="">
          <a href='#' {{action 'openEdit'}}>Edit</a>
        </p>
      {{/if}}
    </div>
  </div>
  <div class="ui eight wide column">
    <div class="ui raised block segment">
      <h3 class="ui header">Email (Username)</h3>
      <div class="ui clearing divider"></div>
      {{#if isEmailEditing}}
        <div class={{if errorMessage "ui error form" "ui form"}}>
          <div class="ui error message">
            <p>{{errors.email}}</p>
            <p>{{errors.server}}</p>
          </div>
          <div class={{if errors.email "field error required" "field required"}}>
            <label>Email</label>
            {{one-way-input value=email update=(action (mut email))}}
          </div>
          <button class="ui mini teal button"{{action 'saveEmail'}}>Save</button>
          <button class="ui mini button" {{action 'closeEmailEdit'}}>Cancel</button>
        </div>
      {{else}}
        <strong>Email</strong>
        <p>{{currentEmail}}</p>
        <p class="">
          <a href='#' {{action 'openEmailEdit'}}>Edit</a>
        </p>
      {{/if}}
      <h3 class="ui header">Password</h3>
      <div class="ui clearing divider"></div>
      <button class="ui small button"{{action 'resetPassword'}}>Reset Password</button>
      {{#if passwordIsReset}}
      <div class="ui message">
        <i class="close icon" {{action 'closePasswordMessage'}}></i>
        <div class="header">
          <i class="warning sign icon"></i>
          Further Action Required
        </div>
        <p>{{passwordIsReset}}</p>
      </div>
      {{/if}}

    </div>
  </div>
</div>
